(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[671],{8671:(t,e,n)=>{"use strict";n.r(e),n.d(e,{WordpressModule:()=>lt});var o=n(8583),i=n(1577),r=n(326),a=n(4655),s=n(7716),c=n(2340),d=n(1841),l=n(205),g=n(5917),p=n(8002),u=n(5304);let m=(()=>{class t{constructor(t){this.http=t,this.WP_API=c.N.WP_REST.API,this.allPosts=null}handleError(t){let e="Hubo un problema, intente nuevamente";return e=t.error instanceof ErrorEvent?`Error: ${t.error.message}`:`C\xf3digo de error: ${t.status}\n Mensaje: ${t.message}`,(0,l._)(e)}getRecentPosts(t,e=1){return this.http.get(`${this.WP_API}posts?_embed=true`,{observe:"response",params:{per_page:"10",page:""+e,orderby:"modified"}}).pipe((0,p.U)(t=>(this.pages=t.headers.get("x-wp-totalpages"),this.allPosts=t.headers.get("x-wp-total"),t.body)),(0,u.K)(this.handleError))}getPost(t){return this.http.get(`${this.WP_API}posts/${t}?_embed`).pipe((0,p.U)(t=>t))}getMorePosts(t){return t++,this.http.get(`${this.WP_API}posts/?_embed&page=`+t,{observe:"response"}).pipe((0,p.U)(t=>t))}getComments(t){return this.http.get(`${this.WP_API}comments?post=${t}`).pipe((0,p.U)(t=>t))}getAuthor(t){return this.http.get(`${this.WP_API}users/`+t)}getCategories(){return this.http.get(`${this.WP_API}categories`)}getCategory(t){return this.http.get(`${this.WP_API}categories/`+t)}createComment(t,e,n){let o=(new d.WM).append("Authorization","Bearer "+e.token);return this.http.post(`${this.WP_API}comments?token=`+e.token,{author_name:e.displayname,author_email:e.email,post:t,content:n},{headers:o})}createpost(t){let e={headers:{Authorization:"Bearer "+localStorage.getItem("wp-token")}};return this.http.post(`${this.WP_API}posts`,t,e).pipe((0,u.K)(this.handleError))}uploadImage(t){let e={headers:{Authorization:"Bearer "+localStorage.getItem("wp-token")}};return this.http.post(`${this.WP_API}media`,t,e).pipe((0,u.K)(t=>(0,g.of)(t)))}updatepost(t,e){let n={headers:{Authorization:"Bearer "+localStorage.getItem("wp-token")}};return this.http.post(`${this.WP_API}posts/${t}`,e,n).pipe((0,u.K)(this.handleError))}deletepost(t){let e={headers:{Authorization:"Bearer "+localStorage.getItem("wp-token")}};return this.http.delete(`${this.WP_API}posts/${t}`,e).pipe((0,u.K)(this.handleError))}getUserLogged(){let t={headers:{Authorization:"Bearer "+localStorage.getItem("wp-token")}};return this.http.post(`${this.WP_API}users/me`,t).pipe((0,u.K)(this.handleError))}nextPage(t){return this.http.get(`${this.WP_API}/posts?page=${t}&per_page=6`).pipe((0,u.K)(this.handleError))}previousPage(t){return this.http.get(`${this.WP_API}/posts?page=${t}&per_page=6`).pipe((0,u.K)(this.handleError))}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(d.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n(4419),f=n(2522),Z=n(5618),b=n(1095),x=n(6627);function _(t,e){1&t&&(s.TgZ(0,"button",8),s.TgZ(1,"div",3),s.TgZ(2,"mat-icon"),s._uU(3,"account_circle"),s.qZA(),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"span"),s._uU(6,"Iniciar sesi\xf3n"),s.qZA(),s.qZA(),s.qZA()),2&t&&s.Q6J("routerLink","wp-login")}function A(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",9),s.NdJ("click",function(){return s.CHM(t),s.oxw().logout()}),s.TgZ(1,"div",3),s.TgZ(2,"mat-icon"),s._uU(3,"logout"),s.qZA(),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"span"),s._uU(6,"Cerrar sesi\xf3n"),s.qZA(),s.qZA(),s.qZA()}}let v=(()=>{class t{constructor(t,e,n){this.blogService=t,this.wpAuthService=e,this.router=n}get userData(){return this.wpAuthService.user}checklogin(){return this.wpAuthService.getIsAuth()}reloadCurrentRoute(){let t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>{this.router.navigate([t])})}logout(){this.wpAuthService.logout(),this.reloadCurrentRoute()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(m),s.Y36(h.w),s.Y36(a.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-footer"]],decls:26,vars:4,consts:[[1,"footer"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","","routerLinkActive","active-menu-item",3,"routerLink"],[1,"toolbar-icon"],[1,"toolbar-icon-text"],["mat-button","","routerLink","/messages","routerLinkActive","active-menu-item"],["mat-button","",3,"routerLink",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"footer",0),s.TgZ(1,"mat-toolbar",0),s.TgZ(2,"div",1),s.TgZ(3,"button",2),s.TgZ(4,"div",3),s.TgZ(5,"mat-icon"),s._uU(6,"book"),s.qZA(),s.qZA(),s.TgZ(7,"div",4),s.TgZ(8,"span"),s._uU(9,"Posts"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(10,"button",2),s.TgZ(11,"div",3),s.TgZ(12,"mat-icon"),s._uU(13,"note_add"),s.qZA(),s.qZA(),s.TgZ(14,"div",4),s.TgZ(15,"span"),s._uU(16,"Nueva entrada"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"button",5),s.TgZ(18,"div",3),s.TgZ(19,"mat-icon"),s._uU(20,"list"),s.qZA(),s.qZA(),s.TgZ(21,"div",4),s.TgZ(22,"span"),s._uU(23,"Categorias"),s.qZA(),s.qZA(),s.qZA(),s.YNc(24,_,7,1,"button",6),s.YNc(25,A,7,0,"button",7),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(3),s.Q6J("routerLink","posts"),s.xp6(7),s.Q6J("routerLink","newpost"),s.xp6(14),s.Q6J("ngIf",!e.checklogin()),s.xp6(1),s.Q6J("ngIf",e.checklogin()))},directives:[f.Ye,Z.yH,Z.xw,Z.Wh,b.lW,a.Od,a.rH,x.Hw,o.O5],styles:[".footer[_ngcontent-%COMP%]{position:fixed;width:100%;height:50px;background:#f5f5f5;color:#616161;bottom:0}.toolbar-icon[_ngcontent-%COMP%]{line-height:0}.toolbar-icon-text[_ngcontent-%COMP%]{line-height:1.8;font-size:70%}.active-menu-item[_ngcontent-%COMP%]{color:#373737}"]}),t})(),w=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-wordpress"]],decls:4,vars:0,consts:[[1,"wrapper","container"],[1,"push"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s._UZ(1,"router-outlet"),s._UZ(2,"div",1),s.qZA(),s._UZ(3,"app-footer"))},directives:[a.lC,v],styles:[".wrapper[_ngcontent-%COMP%]{min-height:100%;margin-bottom:-80px}*[_ngcontent-%COMP%]   html[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:80px}"]}),t})();var q=n(3679),T=n(8295),P=n(9983);let C=(()=>{class t{constructor(t,e,n){this.fb=t,this.wpAuthService=e,this.router=n,this.hide=!0,this.wpLoginForm=this.fb.group({username:["",q.kI.compose([q.kI.required])],password:["",q.kI.compose([q.kI.required])]})}ngOnInit(){}Auth(){const{username:t,password:e}=this.wpLoginForm.value;this.wpAuthService.Login(t,e)}ngOnDestroy(){this.wpLoginForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(q.qu),s.Y36(h.w),s.Y36(a.F0))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-bloglogin"]],decls:23,vars:8,consts:[["color","#FFF","height","4px",3,"fixed","includeSpinner"],[1,"form-wraper"],[1,"form-container","card"],[1,"form-body"],[1,"form-header",2,"text-align","center"],["src","./assets/img/wordpress.png","width","20%"],[1,"form-title"],[3,"formGroup","ngSubmit"],[1,"justifier"],["matInput","","placeholder","Nombre de usuario o correo electr\xf3nico","formControlName","username","text","username",1,"form-input"],["matInput","","autocomplete","off","placeholder","Contrase\xf1a","formControlName","password","text","password",1,"form-input",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],[1,"form-footer"],["type","submit","mat-raised-button","",1,"btn","custom-btn",3,"disabled"]],template:function(t,e){1&t&&(s._UZ(0,"ngx-loading-bar",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"div",3),s.TgZ(4,"div",4),s._UZ(5,"img",5),s.TgZ(6,"h4",6),s._uU(7,"Inicio de sesi\xf3n"),s.qZA(),s.qZA(),s.TgZ(8,"form",7),s.NdJ("ngSubmit",function(){return e.Auth()}),s.TgZ(9,"mat-form-field",8),s._UZ(10,"input",9),s.TgZ(11,"mat-error"),s._uU(12," Es necesario el nombre de usuario "),s.qZA(),s.qZA(),s.TgZ(13,"mat-form-field",8),s._UZ(14,"input",10),s.TgZ(15,"button",11),s.NdJ("click",function(){return e.hide=!e.hide}),s.TgZ(16,"mat-icon"),s._uU(17),s.qZA(),s.qZA(),s.TgZ(18,"mat-error"),s._uU(19," Debe ingresar una contrase\xf1a "),s.qZA(),s.qZA(),s.TgZ(20,"div",12),s.TgZ(21,"button",13),s._uU(22," Iniciar sesi\xf3n "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("fixed",!1)("includeSpinner",!1),s.xp6(8),s.Q6J("formGroup",e.wpLoginForm),s.xp6(6),s.Q6J("type",e.hide?"password":"text"),s.xp6(1),s.uIk("aria-label","Ocultar contrase\xf1a")("aria-pressed",e.hide),s.xp6(2),s.Oqu(e.hide?"visibility_off":"visibility"),s.xp6(4),s.Q6J("disabled",e.wpLoginForm.invalid))},directives:[r.Nv,q._Y,q.JL,q.sg,T.KE,P.Nt,q.Fj,q.JJ,q.u,T.TO,b.lW,T.R9,x.Hw],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin:0!important;overflow:hidden}.add-btn[_ngcontent-%COMP%]{position:fixed;right:25px;bottom:20Px}.form-wraper[_ngcontent-%COMP%]{width:100%;margin-top:5%}.form-container[_ngcontent-%COMP%]{width:50%;margin:auto;display:block;background:#fdfdfd}.card[_ngcontent-%COMP%]{border-radius:2px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}.form-header[_ngcontent-%COMP%]{padding:24px 0}.form-title[_ngcontent-%COMP%]{font-weight:200;font-size:2.5em}.form-body[_ngcontent-%COMP%]{padding:0 24px}.justifier[_ngcontent-%COMP%]{width:100%}.form-input[_ngcontent-%COMP%]{margin-top:24px}.form-footer[_ngcontent-%COMP%]{padding:24px}.btn[_ngcontent-%COMP%]{display:block;width:100%;padding:3%!important;font-size:1.5em;font-weight:200}.custom-btn[_ngcontent-%COMP%]{background:#3f51b5;color:#fff}.txt[_ngcontent-%COMP%]{text-align:center;color:#333;margin:10px auto!important}.spinner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width: 768px) and (max-width: 1024px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}@media (min-width: 481px) and (max-width: 767px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}@media (min-width: 320px) and (max-width: 480px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}"]}),t})();var k=n(8259),O=n.n(k);let M=(()=>{class t{constructor(t,e){this.wpAuthService=t,this.router=e}canActivate(t,e){return!(!localStorage.getItem("wp-token")||!this.wpAuthService.getIsAuth)||(O().fire("Error","Debe iniciar sesi\xf3n para acceder a este contenido","error"),!1)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(h.w),s.LFG(a.F0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=n(7441),U=n(2458),y=n(263),J=n(4885);function S(t,e){if(1&t&&(s.TgZ(0,"mat-option",26),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.s9C("value",t.id),s.xp6(1),s.Oqu(t.name)}}function N(t,e){1&t&&(s.TgZ(0,"div",27),s._uU(1,"El contenido del post es obligatorio (Min 5 palabras)."),s.qZA())}function F(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",28),s._UZ(1,"img",29),s.TgZ(2,"button",30),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().removeImage(e)}),s.TgZ(3,"mat-icon"),s._uU(4,"close"),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(1),s.Q6J("src",t,s.LSH)}}function L(t,e){1&t&&s._UZ(0,"mat-spinner",31)}const Y=function(){return[".."]};let z=(()=>{class t{constructor(t,e,n,o,i,r){this.fb=t,this.blogService=e,this.blog=n,this.router=o,this.route=i,this.http=r,this.categories=[],this.floatLabelControl=new q.NI("auto"),this.image=[],this.new_post={title:"",excerpt:"",content:"",status:"publish"},this.loading=!1,this.formSubmitted=!1,this.newForm=this.fb.group({title:["",q.kI.compose([q.kI.required])],excerpt:["",[q.kI.required,q.kI.maxLength(80),q.kI.minLength(5)]],category:["",q.kI.compose([q.kI.required])],content:["",[q.kI.required,q.kI.minLength(5)]],featured_media:[""]}),this.myForm=new q.cw({name:new q.NI("test",[q.kI.required]),file:new q.NI("",[q.kI.required]),fileSource:new q.NI("",[q.kI.required])})}ngOnInit(){this.getAllCategories()}getAllCategories(){this.blogService.getCategories().subscribe(t=>{this.categories=t,console.log(this.categories)})}createPost(){const t=this.newForm.value;this.loading=!0;const e={title:t.title,excerpt:t.excerpt,content:t.content,categories:t.category,status:"publish"};console.log(e),this.blog.createpost(e).subscribe(t=>{this.loading=!1,this.Msg=t,O().fire("Mensaje","El post ha sido creado exitosamente","success"),setTimeout(()=>this.Msg="",2500),setTimeout(()=>{this.router.navigate([".."],{relativeTo:this.route})})},t=>{this.Msg=t,this.loading=!1,setTimeout(()=>this.Msg="",2500)})}get formValue(){return this.myForm.controls}onFileChange(t){if(t.target.files&&t.target.files[0]){var e=t.target.files.length;for(let o=0;o<e;o++){var n=new FileReader;n.onload=t=>{this.image.push(t.target.result),this.patchValues()},n.readAsDataURL(t.target.files[o])}}}patchValues(){this.myForm.patchValue({fileSource:this.image})}removeImage(t){console.log(this.image,t),this.image=this.image.filter(e=>e!=t),this.patchValues()}submit(){const t=this.myForm.value;this.blog.uploadImage({title:t.name,file:t.fileSource,status:"publish"}).subscribe(t=>{this.Msg=t,console.log(t),O().fire("Mensaje","La imagen ha sido cargada exitosamente","success")},t=>{this.Msg=t,console.log(this.Msg),this.loading=!1,setTimeout(()=>this.Msg="",2500)})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(q.qu),s.Y36(m),s.Y36(m),s.Y36(a.F0),s.Y36(a.gz),s.Y36(d.eN))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-blognew"]],decls:54,vars:12,consts:[["color","#126E82","height","4px",3,"fixed","includeSpinner"],["mat-icon-button","",1,"back-button",3,"routerLink"],[1,"spancentered"],[1,"form-wraper"],[1,"form-container","card"],[1,"form-body"],[1,"form-header"],[1,"form-title"],[3,"formGroup","ngSubmit"],[1,"justifier"],["matInput","","placeholder","T\xedtulo","formControlName","title","text","title",1,"form-input"],["matInput","","placeholder","Resumen","formControlName","excerpt","text","excerpt",1,"form-input"],[1,"justifier",3,"floatLabel"],["formControlName","category"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["formControlName","content","placeholder","Contenido"],["class","error",4,"ngIf"],[1,"form-group"],["formControlName","file","id","file","type","file","multiple","",1,"form-control-file",3,"change"],["mat-mini-fab","","color","primary","type","submit",1,"upload-btn"],[1,"preview-wrapper"],["class","img-preview",4,"ngFor","ngForOf"],[1,"form-footer"],["class","spinner","diameter","40",4,"ngIf"],["type","submit","mat-raised-button","",1,"btn","custom-btn",3,"disabled"],[3,"value"],[1,"error"],[1,"img-preview"],["width","200px",3,"src"],["mat-icon-button","",1,"upperbutton",3,"click"],["diameter","40",1,"spinner"]],template:function(t,e){1&t&&(s._UZ(0,"ngx-loading-bar",0),s.TgZ(1,"mat-toolbar"),s.TgZ(2,"button",1),s.TgZ(3,"mat-icon"),s._uU(4,"keyboard_backspace"),s.qZA(),s.qZA(),s.TgZ(5,"span",2),s._uU(6,"Blog - Nueva Entrada"),s.qZA(),s.qZA(),s.TgZ(7,"div",3),s.TgZ(8,"div",4),s.TgZ(9,"div",5),s.TgZ(10,"div",6),s.TgZ(11,"h3",7),s._uU(12,"Nueva entrada "),s.qZA(),s.qZA(),s.TgZ(13,"form",8),s.NdJ("ngSubmit",function(){return e.createPost()}),s.TgZ(14,"mat-form-field",9),s._UZ(15,"input",10),s.TgZ(16,"mat-error"),s._uU(17," Debes ingresar el T\xedtulo "),s.qZA(),s.qZA(),s.TgZ(18,"mat-form-field",9),s._UZ(19,"textarea",11),s.TgZ(20,"mat-error"),s._uU(21," El resumen es obligatorio "),s.qZA(),s.qZA(),s.TgZ(22,"mat-form-field",12),s.TgZ(23,"mat-select",13),s.TgZ(24,"mat-option",14),s._uU(25,"-- Sin seleccionar --"),s.qZA(),s.YNc(26,S,2,2,"mat-option",15),s.qZA(),s.TgZ(27,"mat-label"),s.TgZ(28,"mat-icon"),s._uU(29,"book"),s.qZA(),s._uU(30," Categoria"),s.qZA(),s.qZA(),s._UZ(31,"angular-editor",16),s.YNc(32,N,2,0,"div",17),s._UZ(33,"br"),s.TgZ(34,"span"),s._uU(35,"Cargar imagen"),s.qZA(),s.TgZ(36,"form",8),s.NdJ("ngSubmit",function(){return e.submit()}),s.TgZ(37,"mat-toolbar"),s.TgZ(38,"div",18),s.TgZ(39,"input",19),s.NdJ("change",function(t){return e.onFileChange(t)}),s.qZA(),s.qZA(),s.TgZ(40,"button",20),s.TgZ(41,"mat-icon"),s._uU(42,"attach_file"),s.qZA(),s.qZA(),s.qZA(),s._UZ(43,"br"),s._UZ(44,"br"),s.TgZ(45,"div",21),s.YNc(46,F,5,1,"div",22),s.qZA(),s.qZA(),s.TgZ(47,"div",23),s.YNc(48,L,1,0,"mat-spinner",24),s._UZ(49,"br"),s.TgZ(50,"button",25),s.TgZ(51,"mat-icon"),s._uU(52,"send"),s.qZA(),s._uU(53," Crear "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("fixed",!1)("includeSpinner",!1),s.xp6(2),s.Q6J("routerLink",s.DdM(11,Y)),s.xp6(11),s.Q6J("formGroup",e.newForm),s.xp6(9),s.Q6J("floatLabel",e.floatLabelControl.value),s.xp6(4),s.Q6J("ngForOf",e.categories),s.xp6(6),s.Q6J("ngIf",e.newForm.controls.content.errors&&e.newForm.controls.content.touched),s.xp6(4),s.Q6J("formGroup",e.myForm),s.xp6(10),s.Q6J("ngForOf",e.image),s.xp6(2),s.Q6J("ngIf",e.loading),s.xp6(2),s.Q6J("disabled",e.newForm.invalid))},directives:[r.Nv,f.Ye,b.lW,a.rH,x.Hw,q._Y,q.JL,q.sg,T.KE,P.Nt,q.Fj,q.JJ,q.u,T.TO,I.gD,U.ey,o.sg,T.hX,y.s6,o.O5,J.$g],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin:0!important;overflow:hidden}.add-btn[_ngcontent-%COMP%]{position:fixed;right:25px;bottom:20Px}.form-wraper[_ngcontent-%COMP%]{width:100%;margin-top:5%}.form-container[_ngcontent-%COMP%]{width:50%;margin:auto;display:block;background:#fdfdfd}.card[_ngcontent-%COMP%]{border-radius:2px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}.form-header[_ngcontent-%COMP%]{padding:24px 0}.form-title[_ngcontent-%COMP%]{text-align:center;font-weight:200;font-size:2.5em}.main-lock-icon[_ngcontent-%COMP%]{width:20%;margin:5px auto;display:block}.form-body[_ngcontent-%COMP%]{padding:0 24px}.justifier[_ngcontent-%COMP%]{width:100%}.form-input[_ngcontent-%COMP%]{margin-top:24px}.form-footer[_ngcontent-%COMP%]{padding:24px}.btn[_ngcontent-%COMP%]{display:block;width:100%;padding:3%!important;font-size:1.5em;font-weight:200}.custom-btn[_ngcontent-%COMP%]{background:#3f51b5;color:#fff}.txt[_ngcontent-%COMP%]{text-align:center;color:#333;margin:10px auto!important}.spinner[_ngcontent-%COMP%]{margin:0 auto}.spancentered[_ngcontent-%COMP%]{text-align:center;display:inline-block;width:100%}.mid[_ngcontent-%COMP%]{width:50%}.boton[_ngcontent-%COMP%]{height:50px}img[_ngcontent-%COMP%]{position:relative!important;width:50%}.upperbutton[_ngcontent-%COMP%]{float:left;top:-10px;right:-1px}@media (min-width: 768px) and (max-width: 1024px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}@media (min-width: 481px) and (max-width: 767px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}@media (min-width: 320px) and (max-width: 480px){.form-container[_ngcontent-%COMP%]{width:95%;margin:auto;padding-bottom:24px!important;display:block;background:#fdfdfd}.btn[_ngcontent-%COMP%]{font-size:1em}}"]}),t})();var D=n(6304),Q=n(2238);let E=(()=>{class t{constructor(t,e,n){this.blogService=t,this.dialogo=e,this.data=n,this.deletePost=n.title}close(){this.dialogo.close(!1)}save(){this.dialogo.close(!0)}ngOnInit(){console.log(this.data)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(m),s.Y36(Q.so),s.Y36(Q.WI))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-blogdelete"]],decls:15,vars:3,consts:[["color","#126E82","height","4px",3,"fixed","includeSpinner"],[2,"display","flex","flex-direction","column","margin","1rem auto","max-width","600px","padding","1rem"],["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,e){1&t&&(s._UZ(0,"ngx-loading-bar",0),s.TgZ(1,"div",1),s.TgZ(2,"h1",2),s._uU(3,"Confirmaci\xf3n"),s.qZA(),s.TgZ(4,"div",3),s.TgZ(5,"p"),s._uU(6," \xbfRealmente desea borrar el post: "),s.TgZ(7,"STRONG"),s._uU(8),s.qZA(),s._uU(9," ?"),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"button",5),s.NdJ("click",function(){return e.close()}),s._uU(12,"No"),s.qZA(),s.TgZ(13,"button",6),s.NdJ("click",function(){return e.save()}),s._uU(14,"S\xed"),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("fixed",!1)("includeSpinner",!1),s.xp6(8),s.Oqu(e.deletePost))},directives:[r.Nv,Q.uh,Q.xY,Q.H8,b.lW],styles:[""]}),t})();var $=n(3220);function W(t,e){if(1&t&&(s.TgZ(0,"mat-option",22),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.s9C("value",t.id),s.xp6(1),s.Oqu(t.name)}}function H(t,e){1&t&&(s.TgZ(0,"div",23),s._uU(1,"El contenido es requerido (Min 5 palabras)."),s.qZA())}let j=(()=>{class t{constructor(t,e,n,o){this.fb=t,this.blogService=e,this.dialogRef=n,this.categories=[],this.id=o.id,this.editPost=this.fb.group({id:["",[q.kI.required]],date:["",[q.kI.required]],modified:["",[q.kI.required]],category:["",[q.kI.required]],title:["",[q.kI.required]],excerpt:["",[q.kI.required]],content:["",[q.kI.required]]})}ngOnInit(){this.getPostDetais(),this.getAllCategories()}showHTML(){document.getElementById("htmlDiv")}getPostDetais(){this.blogService.getPost(this.id).subscribe(t=>{this.editPost.patchValue({id:t.id,date:t.date,modified:t.modified,category:t._embedded["wp:term"][0][0].name,title:t.title.rendered,excerpt:t.excerpt.rendered,content:t.content.rendered})})}getAllCategories(){this.blogService.getCategories().subscribe(t=>{this.categories=t})}save(){this.dialogRef.close(this.editPost.value)}close(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(q.qu),s.Y36(m),s.Y36(Q.so,8),s.Y36(Q.WI))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-blogedit"]],decls:36,vars:7,consts:[[2,"display","flex","flex-direction","column","margin","1rem auto","max-width","600px","padding","1rem"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup","ngSubmit"],["matInput","","formControlName","id","type","text","placeholder","Id"],["matInput","","formControlName","date","placeholder","Fecha de publicaci\xf3n",1,"form-control",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["Date",""],["matInput","","formControlName","modified","placeholder","Fecha \xfaltima modificaci\xf3n",1,"form-control",3,"matDatepicker"],["DateMOD",""],[1,"justifier"],["formControlName","category"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","title","type","text","placeholder","Titulo"],["matInput","","formControlName","excerpt","type","text","placeholder","Resumen"],["formControlName","content"],["class","error",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"],[3,"value"],[1,"error"]],template:function(t,e){if(1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h1",1),s._uU(2,"Editar Post"),s.qZA(),s.TgZ(3,"div",2),s.TgZ(4,"form",3),s.NdJ("ngSubmit",function(){return e.save()}),s.TgZ(5,"mat-form-field"),s._UZ(6,"input",4),s.qZA(),s.TgZ(7,"mat-form-field"),s._UZ(8,"input",5),s._UZ(9,"mat-datepicker-toggle",6),s._UZ(10,"mat-datepicker",7,8),s.qZA(),s.TgZ(12,"mat-form-field"),s._UZ(13,"input",9),s._UZ(14,"mat-datepicker-toggle",6),s._UZ(15,"mat-datepicker",7,10),s.qZA(),s.TgZ(17,"mat-form-field",11),s.TgZ(18,"mat-select",12),s._UZ(19,"mat-option",13),s.YNc(20,W,2,2,"mat-option",14),s.qZA(),s.TgZ(21,"mat-label"),s.TgZ(22,"mat-icon"),s._uU(23,"book"),s.qZA(),s._uU(24," Categoria"),s.qZA(),s.qZA(),s.TgZ(25,"mat-form-field"),s._UZ(26,"input",15),s.qZA(),s.TgZ(27,"mat-form-field"),s._UZ(28,"input",16),s.qZA(),s._UZ(29,"angular-editor",17),s.YNc(30,H,2,0,"div",18),s.qZA(),s.qZA(),s.TgZ(31,"div",19),s.TgZ(32,"button",20),s.NdJ("click",function(){return e.close()}),s._uU(33,"Cancelar"),s.qZA(),s.TgZ(34,"button",21),s.NdJ("click",function(){return e.save()}),s._uU(35,"Confirmar"),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.MAs(11),n=s.MAs(16);s.xp6(4),s.Q6J("formGroup",e.editPost),s.xp6(4),s.Q6J("matDatepicker",t),s.xp6(1),s.Q6J("for",t),s.xp6(4),s.Q6J("matDatepicker",n),s.xp6(1),s.Q6J("for",n),s.xp6(6),s.Q6J("ngForOf",e.categories),s.xp6(10),s.Q6J("ngIf",e.editPost.controls.content.errors&&e.editPost.controls.content.touched)}},directives:[Q.uh,Q.xY,q._Y,q.JL,q.sg,T.KE,P.Nt,q.Fj,q.JJ,q.u,$.hl,$.nW,T.R9,$.Mq,I.gD,U.ey,o.sg,T.hX,x.Hw,y.s6,o.O5,Q.H8,b.lW],styles:[".mat-form-field[_ngcontent-%COMP%]{display:block}textarea[_ngcontent-%COMP%]{height:100px;resize:vertical}"]}),t})();var R=n(2013),B=n(9866),K=n(3738),G=n(5384);function V(t,e){if(1&t&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.hij("Nro. de publicaciones: ",t.postCount,"")}}function X(t,e){if(1&t&&(s.TgZ(0,"mat-card-subtitle"),s._uU(1),s.ALo(2,"date"),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(s.lcZ(2,1,t.date_gmt))}}function tt(t,e){1&t&&s._UZ(0,"img",21)}const et=function(t){return["view",t]};function nt(t,e){if(1&t&&s._UZ(0,"img",22),2&t){const t=s.oxw().$implicit;s.Q6J("routerLink",s.VKq(2,et,t.id))("src",t._embedded["wp:featuredmedia"][0].source_url,s.LSH)}}function ot(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-card",9),s.TgZ(1,"mat-card-header"),s._UZ(2,"div",10),s.TgZ(3,"mat-card-title"),s._uU(4),s.qZA(),s.YNc(5,X,3,3,"mat-card-subtitle",1),s.TgZ(6,"button",11),s.TgZ(7,"mat-icon"),s._uU(8,"more_vert"),s.qZA(),s.qZA(),s.TgZ(9,"mat-menu",12,13),s.TgZ(11,"button",14),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openEdit(e)}),s._uU(12,"Editar"),s.qZA(),s.TgZ(13,"button",14),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().openDelete(e)}),s._uU(14,"Eliminar"),s.qZA(),s.qZA(),s.qZA(),s.YNc(15,tt,1,0,"img",15),s.YNc(16,nt,1,4,"img",16),s.TgZ(17,"mat-card-content",17),s._UZ(18,"div",18),s.qZA(),s.TgZ(19,"mat-card-actions",19),s.TgZ(20,"button",20),s._uU(21),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,n=s.MAs(10);s.xp6(2),s.Jzz("background-image: url('",t._embedded.author[0].avatar_urls[96],"');"),s.xp6(2),s.Oqu(t._embedded.author[0].name),s.xp6(1),s.Q6J("ngIf",t.modified),s.xp6(1),s.Q6J("matMenuTriggerFor",n),s.xp6(9),s.Q6J("ngIf",!t._embedded["wp:featuredmedia"]),s.xp6(1),s.Q6J("ngIf",t._embedded["wp:featuredmedia"]),s.xp6(1),s.Q6J("routerLink",s.VKq(11,et,t.id)),s.xp6(1),s.Q6J("innerHTML",t.excerpt.rendered,s.oJD),s.xp6(3),s.Oqu(t._embedded["wp:term"][0][0].name)}}let it=(()=>{class t{constructor(t,e,n,o,i,r){this.blogService=t,this.router=e,this.route=n,this.dialog=o,this.notificationService=i,this.spinner=r,this.postCount=null,this.page=1,this.throttle=300,this.scrollDistance=.2,this.limit=20,this.loading=!1,this.finishPage=5,this.actualPage=1,this.showGoUpButton=!1}ngOnInit(){var t=this;return(0,D.Z)(function*(){t.getposts(),t.getuserData()})()}getposts(){var t=this;return(0,D.Z)(function*(){t.spinner.show(),t.blogService.getRecentPosts(1).subscribe(e=>{t.postCount=t.blogService.allPosts,t.posts=e,t.spinner.hide()},t=>console.error(t))})()}loadData(t){this.page++,this.blogService.getRecentPosts(this.page).subscribe(e=>{this.posts=[...this.posts,...e],t.target.complete(),this.page==this.blogService.pages&&(t.target.disabled=!0)})}getuserData(){this.blogService.getUserLogged().subscribe(t=>{this.userDetails=t,console.log(this.userDetails)})}redirectTo(t){this.router.navigateByUrl("/",{skipLocationChange:!0}).then(()=>this.router.navigate([t]))}openEdit(t){const e=new Q.vA;e.autoFocus=!0,e.data={id:t.id},this.dialog.open(j,e).afterClosed().subscribe(e=>{console.log(e),e&&this.blogService.updatepost(t.id,e).subscribe(t=>{this.redirectTo("/web/posts"),this.notificationService.success("Post "+t.title.reSndered+" editado exitosamente")},t=>{this.notificationService.warn("Error: "+t+" ")})})}openDelete(t){const e=new Q.vA;e.data={title:t.title.rendered},this.dialog.open(E,e).afterClosed().subscribe(e=>{e&&this.blogService.deletepost(t.id).subscribe(t=>{this.redirectTo("/web/posts"),this.notificationService.success("Post "+t.title.rendered+" eliminado exitosamente")},t=>{this.notificationService.warn("Error: "+t+" ")})})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(m),s.Y36(a.F0),s.Y36(a.gz),s.Y36(Q.uw),s.Y36(R.g),s.Y36(B.t2))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-blog"]],decls:10,vars:4,consts:[["color","#126E82","height","4px",3,"fixed","includeSpinner"],[4,"ngIf"],[1,"container"],[1,"card-holder"],["class","card mat-elevation-z3",4,"ngFor","ngForOf"],[1,"row","pb-5"],[1,"col-md-12","p-5"],["bdOpacity","0.9","bdColor","","size","medium","color","black","type","ball-spin-clockwise"],[2,"font-size","20px","color","black"],[1,"card","mat-elevation-z3"],["mat-card-avatar","",1,"header-image"],["mat-icon-button","","aria-label","Toggle menu",1,"more-button",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",3,"click"],["class","placeholder","style","cursor:pointer; width:100%; height:100%;","src","../../../../assets/img/imgnotfound.jpg",4,"ngIf"],["style","cursor:pointer;","mat-card-image","",3,"routerLink","src",4,"ngIf"],[2,"cursor","pointer",3,"routerLink"],[3,"innerHTML"],[2,"padding","0%"],["mat-flat-button","","disabled",""],["src","../../../../assets/img/imgnotfound.jpg",1,"placeholder",2,"cursor","pointer","width","100%","height","100%"],["mat-card-image","",2,"cursor","pointer",3,"routerLink","src"]],template:function(t,e){1&t&&(s._UZ(0,"ngx-loading-bar",0),s.YNc(1,V,2,1,"span",1),s.TgZ(2,"div",2),s.TgZ(3,"section",3),s.YNc(4,ot,22,13,"mat-card",4),s.qZA(),s.qZA(),s.TgZ(5,"div",5),s.TgZ(6,"div",6),s.TgZ(7,"ngx-spinner",7),s.TgZ(8,"p",8),s._uU(9,"Cargando..."),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("fixed",!1)("includeSpinner",!1),s.xp6(1),s.Q6J("ngIf",e.postCount),s.xp6(3),s.Q6J("ngForOf",e.posts))},directives:[r.Nv,o.O5,o.sg,B.Ro,K.a8,K.dk,K.kc,K.n5,b.lW,G.p6,x.Hw,G.VK,G.OP,K.dn,a.rH,K.hq,K.$j,K.G2],pipes:[o.uU],styles:["@media screen and (min-width: 40em){.card-holder[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.card[_ngcontent-%COMP%]{max-width:calc(50% - 1em)}}@media screen and (min-width: 60em){.card-holder[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.card[_ngcontent-%COMP%]{max-width:calc(25% - 1em)}}@media screen and (min-width: 52em){.card-holder[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}}.spancentered[_ngcontent-%COMP%]{text-align:center;width:100%}.container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.card-holder[_ngcontent-%COMP%]{border-radius:10px;padding:1em;align-items:center;color:#d3d3d3}.card[_ngcontent-%COMP%]{flex:0 1 calc(25% - 1em);box-sizing:border-box;margin:1rem .25em;box-shadow:0 4px 8px 0 #0003;transition:.3s}.card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px 0 #0003;transition:.2s ease-in-out;transform:translateY(-10px)}.login-button[_ngcontent-%COMP%]{position:relative;right:1%}.add-button[_ngcontent-%COMP%]{position:relative;right:0}.header-image[_ngcontent-%COMP%]{background-size:cover}.more-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:0}mat-card-subtitle[_ngcontent-%COMP%]{font-size:15px}mat-card-title[_ngcontent-%COMP%]{color:#1a1b1a;font-size:20px}"]}),t})();var rt=n(4929);function at(t,e){if(1&t&&s._UZ(0,"img",10),2&t){const t=s.oxw();s.Q6J("src",null==t.postDetail?null:t.postDetail._embedded["wp:featuredmedia"][0].source_url,s.LSH)}}const st=function(){return["/web/posts"]},ct=[{path:"",component:w,children:[{path:"",component:it},{path:"view/:id",component:(()=>{class t{constructor(t,e){this.blogService=t,this.route=e}ngOnInit(){const t=this.route.snapshot.paramMap.get("id");this.blogService.getPost(t).subscribe(t=>{this.postDetail=t})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(m),s.Y36(a.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-blogdetail"]],decls:21,vars:14,consts:[["color","#126E82","height","4px",3,"fixed","includeSpinner"],["mat-icon-button","",1,"back-button",3,"routerLink"],[1,"spancentered"],[1,"container"],[1,"card-holder"],["cols","1","rowHeight","fit","gutterSize","1px"],[1,"card"],["mat-card-avatar","",1,"header-image"],["mat-card-image","",3,"src",4,"ngIf"],[3,"innerHTML"],["mat-card-image","",3,"src"]],template:function(t,e){1&t&&(s._UZ(0,"ngx-loading-bar",0),s.TgZ(1,"mat-toolbar"),s.TgZ(2,"button",1),s.TgZ(3,"mat-icon"),s._uU(4,"keyboard_backspace"),s.qZA(),s.qZA(),s.TgZ(5,"span",2),s._uU(6),s.qZA(),s.qZA(),s.TgZ(7,"div",3),s.TgZ(8,"div",4),s.TgZ(9,"mat-grid-list",5),s.TgZ(10,"mat-card",6),s.TgZ(11,"mat-card-header"),s._UZ(12,"div",7),s.TgZ(13,"mat-card-title"),s._uU(14),s.qZA(),s.TgZ(15,"mat-card-subtitle"),s._uU(16),s.ALo(17,"date"),s.qZA(),s.qZA(),s.YNc(18,at,1,1,"img",8),s.TgZ(19,"mat-card-content"),s._UZ(20,"div",9),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.Q6J("fixed",!1)("includeSpinner",!1),s.xp6(2),s.Q6J("routerLink",s.DdM(13,st)),s.xp6(4),s.Oqu(null==e.postDetail?null:e.postDetail.title.rendered),s.xp6(6),s.Jzz("background-image: url('",null==e.postDetail?null:e.postDetail._embedded.author[0].avatar_urls[96],"');"),s.xp6(2),s.Oqu(null==e.postDetail?null:e.postDetail._embedded.author[0].name),s.xp6(2),s.Oqu(s.lcZ(17,11,null==e.postDetail?null:e.postDetail.date_gmt)),s.xp6(2),s.Q6J("ngIf",null==e.postDetail?null:e.postDetail._embedded["wp:featuredmedia"]),s.xp6(2),s.Q6J("innerHTML",null==e.postDetail?null:e.postDetail.content.rendered,s.oJD))},directives:[r.Nv,f.Ye,b.lW,a.rH,x.Hw,rt.Il,K.a8,K.dk,K.kc,K.n5,K.$j,o.O5,K.dn,K.G2],pipes:[o.uU],styles:["@media only screen and (max-width: 600px){.mainItems[_ngcontent-%COMP%]{grid-template-columns:auto}}.spancentered[_ngcontent-%COMP%]{text-align:center;display:inline-block;width:100%}.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.card-holder[_ngcontent-%COMP%]{border-radius:10px;padding:1em;align-items:center;color:#d3d3d3}.card[_ngcontent-%COMP%]{flex:0 1 calc(25% - 1em);box-sizing:border-box;margin:1rem .25em;box-shadow:0 4px 8px 0 #0003;transition:.3s}.card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px 0 #0003}.header-image[_ngcontent-%COMP%]{background-size:cover}figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10%;height:10%}mat-card-subtitle[_ngcontent-%COMP%]{font-size:15px}mat-card-title[_ngcontent-%COMP%]{color:#1a1b1a;font-size:20px}"]}),t})()},{path:"newpost",component:z,canActivate:[M]},{path:"editpost",component:j,canActivate:[M]},{path:"wp-login",component:C},{path:"**",redirectTo:""}]}];let dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.Bz.forChild(ct)],a.Bz]}),t})(),lt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[{provide:r.yK,useValue:{latencyThreshold:100}}],imports:[[dt,a.Bz,o.ez,i.m]]}),t})()}}]);