<!DOCTYPE html>
<html class="writer-html5" lang="es" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Servicio: Blog &mdash; documentación de Proyecto Angular - Práctica Profesional 2021-2 AIATIC - 0.1</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="Servicio: Autenticación" href="authService.html" />
    <link rel="prev" title="Interface: WP_Category" href="categoryInterface.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.png" class="logo" alt="Logotipo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contenido:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../backend/index.html">Backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="../frontend/index.html">Frontend</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="wordpress.html">Implementación de Wordpress</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="wordpress.html#primer-paso">Primer Paso</a></li>
<li class="toctree-l2"><a class="reference internal" href="wordpress.html#segundo-paso">Segundo Paso</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="wordpress.html#tercer-paso">Tercer Paso</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="postInterface.html">Interface: Post</a></li>
<li class="toctree-l3"><a class="reference internal" href="categoryInterface.html">Interface: WP_Category</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Servicio: Blog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#procedimiento-error-de-respuesta">Procedimiento: Error de respuesta</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-listar-entradas">Método: Listar Entradas</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-detalles-publicacion">Método: Detalles publicación</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-subir-imagen-destacada">Método: Subir imagen destacada</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-crear-nueva-entrada">Método: Crear nueva Entrada</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-modificar-entrada">Método: Modificar Entrada</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-eliminar-entrada">Método: Eliminar Entrada</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-listar-categorias">Método: Listar Categorias</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metodo-obtener-comentarios">Método: Obtener Comentarios</a></li>
<li class="toctree-l4"><a class="reference internal" href="#codigo-fuente-completo">Código Fuente completo</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="authService.html">Servicio: Autenticación</a></li>
<li class="toctree-l3"><a class="reference internal" href="guardService.html">Servicio: BlogGuard</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogComponent.html">Componente: Blog</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogDetailComponent.html">Componente: Blog Detail</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogDeleteComponent.html">Componente: Blog Delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogEditComponent.html">Componente: Blog Edit</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogLoginComponent.html">Componente: Blog Login</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogNewComponent.html">Componente: Blog New</a></li>
<li class="toctree-l3"><a class="reference internal" href="blogFoteerComponent.html">Componente: Blog Footer</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Proyecto Angular - Práctica Profesional 2021-2 AIATIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="wordpress.html">Implementación de Wordpress</a> &raquo;</li>
      <li>Servicio: Blog</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/wp/postService.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="servicio-blog">
<h1>Servicio: Blog<a class="headerlink" href="#servicio-blog" title="Enlazar permanentemente con este título"></a></h1>
<p>Este servicio se encargará de efectuar las peticiones a la Rest API
relacionadas con las publicaciones del blog</p>
<table class="colwidths-given docutils align-default" id="id1">
<caption><span class="caption-text">Métodos de petición HTTP Utilizados</span><a class="headerlink" href="#id1" title="Enlace permanente a esta tabla"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Método</p></th>
<th class="head"><p>Ruta recurso</p></th>
<th class="head"><p>Acción</p></th>
<th class="head"><p>Autenticación</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/posts?_embed=true</p></td>
<td><p>Devolver listado de entradas.</p></td>
<td><p>No requerida</p></td>
</tr>
<tr class="row-odd"><td><p>GET</p></td>
<td><p>/posts/${id}?_embed</p></td>
<td><p>Devolver una entrada.</p></td>
<td><p>No requerida</p></td>
</tr>
<tr class="row-even"><td><p>POST</p></td>
<td><p>/posts</p></td>
<td><p>Crear una nueva entrada.</p></td>
<td><p>Sí es requerida</p></td>
</tr>
<tr class="row-odd"><td><p>PUT</p></td>
<td><p>/posts/${id}?_embed</p></td>
<td><p>Modificar una entrada.</p></td>
<td><p>Sí es requerida</p></td>
</tr>
<tr class="row-even"><td><p>DELETE</p></td>
<td><p>/posts/{postId}</p></td>
<td><p>Borrar una entrada.</p></td>
<td><p>Sí es requerida</p></td>
</tr>
<tr class="row-odd"><td><p>GET</p></td>
<td><p>/categories</p></td>
<td><p>Devolver listado de categorias.</p></td>
<td><p>No requerida</p></td>
</tr>
<tr class="row-even"><td><p>GET</p></td>
<td><p>/comments?post=${id}</p></td>
<td><p>Devolver comentarios de una publicación.</p></td>
<td><p>No requerida</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Se realiza la creación del servicio para la Rest Api de WordPress con
el siguiente comando:</p></li>
</ul>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">ng</span> <span class="pre">generate</span> <span class="pre">service</span> <span class="pre">services/blog</span></code></p>
</div></blockquote>
<ul class="simple">
<li><p>Se procede a efectuar la importación de las diferentes dependencias y
tipos requeridos en el servicio tal como se aprecia a continuación.
Así mismo, se define las variables y endpoints de la API previamente
definidos en el environment.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">import</span> <span class="p">{</span> <span class="nx">environment</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/environments/environment&#39;</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="k">import</span> <span class="p">{</span><span class="nx">HttpClient</span><span class="p">,</span> <span class="nx">HttpErrorResponse</span><span class="p">,</span> <span class="nx">HttpHeaders</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span><span class="p">,</span> <span class="nx">throwError</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="k">import</span> <span class="p">{</span> <span class="nx">catchError</span><span class="p">,</span> <span class="nx">map</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="k">import</span> <span class="p">{</span> <span class="nx">WP_User</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../../interfaces/WP_User&#39;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Wp_Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../../interfaces/WP_Category&#39;</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Post</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/interfaces/post&#39;</span><span class="p">;</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kd">@Injectable</span><span class="p">({</span>
<span class="linenos">11</span>  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
<span class="linenos">12</span><span class="p">})</span>
<span class="linenos">13</span><span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogService</span> <span class="p">{</span>
<span class="linenos">14</span>  <span class="c1">// URL del blog que vamos a trabajar con su REST API</span>
<span class="linenos">15</span>  <span class="nx">WP_API</span>: <span class="kt">string</span> <span class="o">=</span> <span class="nx">environment</span><span class="p">.</span><span class="nx">WP_REST</span><span class="p">.</span><span class="nx">API</span><span class="p">;</span>
<span class="linenos">16</span>  <span class="c1">//Opciones de blog</span>
<span class="linenos">17</span>  <span class="nx">allPosts</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="linenos">18</span>  <span class="nx">pages</span>: <span class="kt">any</span><span class="p">;</span>
<span class="linenos">19</span>
<span class="linenos">20</span>  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{}</span>
</pre></div>
</div>
<section id="procedimiento-error-de-respuesta">
<h2>Procedimiento: Error de respuesta<a class="headerlink" href="#procedimiento-error-de-respuesta" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Este procedimiento es el encargado de gestionar las respuestas de
error obtenidas de la API, este recibe como parametro el error de la
depedencia HttpErrorResponse</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span>: <span class="kt">HttpErrorResponse</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">&#39;Hubo un problema, intente nuevamente&#39;</span><span class="p">;</span>
<span class="linenos"> 3</span>    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">error</span> <span class="ow">instanceof</span> <span class="nx">ErrorEvent</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 4</span>      <span class="c1">// Errores del lado del cliente</span>
<span class="linenos"> 5</span>      <span class="nx">errorMessage</span> <span class="o">=</span> <span class="sb">`Error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="linenos"> 6</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos"> 7</span>      <span class="c1">// Errores del lado de la api</span>
<span class="linenos"> 8</span>      <span class="nx">errorMessage</span> <span class="o">=</span> <span class="sb">`Código de error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">\n Mensaje: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="linenos"> 9</span>    <span class="p">}</span>
<span class="linenos">10</span>    <span class="k">return</span> <span class="nx">throwError</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">);</span>
<span class="linenos">11</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-listar-entradas">
<h2>Método: Listar Entradas<a class="headerlink" href="#metodo-listar-entradas" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Se define este método que será el encargado de traer todas las
entradas del blog de acuerdo al parámetro de número de
publicaciones por página, el número de página y ordenándolos
por su última modificación.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">getRecentPosts</span><span class="p">(</span><span class="nx">page</span> <span class="o">=</span> <span class="mf">1</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 3</span>      <span class="nx">observe</span><span class="o">:</span> <span class="s1">&#39;response&#39;</span> <span class="kr">as</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
<span class="linenos"> 4</span>      <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 5</span>        <span class="nx">per_page</span><span class="o">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
<span class="linenos"> 6</span>        <span class="nx">page</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">page</span><span class="p">,</span>
<span class="linenos"> 7</span>        <span class="nx">orderby</span><span class="o">:</span> <span class="s1">&#39;modified&#39;</span><span class="p">,</span>
<span class="linenos"> 8</span>      <span class="p">},</span>
<span class="linenos"> 9</span>    <span class="p">};</span>
<span class="linenos">10</span>
<span class="linenos">11</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos">12</span>      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts?_embed=true`</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">13</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos">14</span>        <span class="nx">map</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos">15</span>          <span class="k">this</span><span class="p">.</span><span class="nx">pages</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">].</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;x-wp-totalpages&#39;</span><span class="p">);</span>
<span class="linenos">16</span>          <span class="k">this</span><span class="p">.</span><span class="nx">allPosts</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">].</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;x-wp-total&#39;</span><span class="p">);</span>
<span class="linenos">17</span>          <span class="k">return</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">];</span>
<span class="linenos">18</span>        <span class="p">}),</span>
<span class="linenos">19</span>        <span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">)</span>
<span class="linenos">20</span>      <span class="p">);</span>
<span class="linenos">21</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-detalles-publicacion">
<h2>Método: Detalles publicación<a class="headerlink" href="#metodo-detalles-publicacion" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Este método se encargará de traer la información detallada de una
entrada especifica, para ello recibe como parámetro el id del
post para realizar la correspondiente llamada al punto final.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>  <span class="nx">getPost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos">2</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">?_embed`</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos">3</span>      <span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos">4</span>        <span class="k">return</span> <span class="nx">post</span><span class="p">;</span>
<span class="linenos">5</span>      <span class="p">})</span>
<span class="linenos">6</span>    <span class="p">);</span>
<span class="linenos">7</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-subir-imagen-destacada">
<h2>Método: Subir imagen destacada<a class="headerlink" href="#metodo-subir-imagen-destacada" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Se define este método para la carga de imagen destacada que será
usada al momento de modificar o crear una nueva entrada, este
método recibe como parametro un array con la información de la imagen.
Adicionalmente se define un encabezado en el que se agregará los detalles
de autenticación requeridos para efectuar exitosamente la petición.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">uploadImage</span><span class="p">(</span><span class="nx">data</span>:<span class="kt">any</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 3</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 4</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos"> 5</span>      <span class="p">},</span>
<span class="linenos"> 6</span>    <span class="p">};</span>
<span class="linenos"> 7</span>  
<span class="linenos"> 8</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos"> 9</span>      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">media`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">10</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">of</span><span class="p">(</span><span class="nx">err</span><span class="p">)));</span>
<span class="linenos">11</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-crear-nueva-entrada">
<h2>Método: Crear nueva Entrada<a class="headerlink" href="#metodo-crear-nueva-entrada" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Este método recibe como parametro un array con la información requerida para la
creación de una nueva entrada. Adicionalmente se define un encabezado en
el que se agregará los detalles de autenticación requeridos para
efectuar exitosamente la petición.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">createpost</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 3</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 4</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos"> 5</span>      <span class="p">},</span>
<span class="linenos"> 6</span>    <span class="p">};</span>
<span class="linenos"> 7</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos"> 8</span>      <span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos"> 9</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">10</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-modificar-entrada">
<h2>Método: Modificar Entrada<a class="headerlink" href="#metodo-modificar-entrada" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Este método es el encargado de modificar una entrada existente en el blog,
este recibe como parametro el id del post y un array (data) con la
información requerida para la modificación de esta. Adicionalmente
se define un encabezado en el que se agregará los detalles de
autenticación requeridos para efectuar exitosamente la petición.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">updatepost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">,</span> <span class="nx">data</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 3</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 4</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos"> 5</span>      <span class="p">},</span>
<span class="linenos"> 6</span>    <span class="p">};</span>
<span class="linenos"> 7</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos"> 8</span>      <span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos"> 9</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">10</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-eliminar-entrada">
<h2>Método: Eliminar Entrada<a class="headerlink" href="#metodo-eliminar-entrada" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Este se encarga de efectuar la eliminación de una entrada, este
recibe como parametro el id del post y un array (data) con la
información requerida para la modificación de la misma. Adicionalmente
se define un encabezado en el que se agregará los detalles de
autenticación requeridos para efectuar exitosamente la petición.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>  <span class="nx">deletepost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 2</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 3</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 4</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos"> 5</span>      <span class="p">},</span>
<span class="linenos"> 6</span>    <span class="p">};</span>
<span class="linenos"> 7</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos"> 8</span>      <span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos"> 9</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">10</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="metodo-listar-categorias">
<h2>Método: Listar Categorias<a class="headerlink" href="#metodo-listar-categorias" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Se define el método que se encarga de obtener el listado de todas las
categorias existentes en el blog.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>  <span class="nx">getCategories</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos">2</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">categories`</span><span class="p">);</span>
<span class="linenos">3</span>  <span class="p">}</span>
</pre></div>
</div>
<p>Al añadir cada uno de los métodos mencionados y el procedimiento
encargado de manipular los errores de la API el código del servicio
tendrá el siguiente aspecto:</p>
</section>
<section id="metodo-obtener-comentarios">
<h2>Método: Obtener Comentarios<a class="headerlink" href="#metodo-obtener-comentarios" title="Enlazar permanentemente con este título"></a></h2>
<ul class="simple">
<li><p>Se define el método encargado de devolver los comentarios relacionados con
una publicación del blog.</p></li>
</ul>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>  <span class="nx">getComments</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">2</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">comments?post=</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos">3</span>      <span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos">4</span>        <span class="k">return</span> <span class="nx">post</span><span class="p">;</span>
<span class="linenos">5</span>      <span class="p">})</span>
<span class="linenos">6</span>    <span class="p">);</span>
<span class="linenos">7</span>  <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="codigo-fuente-completo">
<h2>Código Fuente completo<a class="headerlink" href="#codigo-fuente-completo" title="Enlazar permanentemente con este título"></a></h2>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="k">import</span> <span class="p">{</span> <span class="nx">environment</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/environments/environment&#39;</span><span class="p">;</span>
<span class="linenos">  2</span><span class="k">import</span> <span class="p">{</span><span class="nx">HttpClient</span><span class="p">,</span> <span class="nx">HttpErrorResponse</span><span class="p">,</span> <span class="nx">HttpHeaders</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/common/http&#39;</span><span class="p">;</span>
<span class="linenos">  3</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Injectable</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;@angular/core&#39;</span><span class="p">;</span>
<span class="linenos">  4</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Observable</span><span class="p">,</span> <span class="k">of</span><span class="p">,</span> <span class="nx">throwError</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs&#39;</span><span class="p">;</span>
<span class="linenos">  5</span><span class="k">import</span> <span class="p">{</span> <span class="nx">catchError</span><span class="p">,</span> <span class="nx">map</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;rxjs/operators&#39;</span><span class="p">;</span>
<span class="linenos">  6</span><span class="k">import</span> <span class="p">{</span> <span class="nx">WP_User</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../../interfaces/WP_User&#39;</span><span class="p">;</span>
<span class="linenos">  7</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Wp_Category</span> <span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;../../interfaces/WP_Category&#39;</span><span class="p">;</span>
<span class="linenos">  8</span><span class="k">import</span> <span class="p">{</span> <span class="nx">Post</span><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;src/app/interfaces/post&#39;</span><span class="p">;</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="kd">@Injectable</span><span class="p">({</span>
<span class="linenos"> 11</span>  <span class="nx">providedIn</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
<span class="linenos"> 12</span><span class="p">})</span>
<span class="linenos"> 13</span><span class="k">export</span> <span class="kd">class</span> <span class="nx">BlogService</span> <span class="p">{</span>
<span class="linenos"> 14</span>  <span class="c1">// URL del blog que vamos a trabajar con su REST API</span>
<span class="linenos"> 15</span>  <span class="nx">WP_API</span>: <span class="kt">string</span> <span class="o">=</span> <span class="nx">environment</span><span class="p">.</span><span class="nx">WP_REST</span><span class="p">.</span><span class="nx">API</span><span class="p">;</span>
<span class="linenos"> 16</span>  <span class="c1">//Opciones de blog</span>
<span class="linenos"> 17</span>  <span class="nx">allPosts</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="linenos"> 18</span>  <span class="nx">pages</span>: <span class="kt">any</span><span class="p">;</span>
<span class="linenos"> 19</span>
<span class="linenos"> 20</span>  <span class="kr">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">http</span>: <span class="kt">HttpClient</span><span class="p">)</span> <span class="p">{}</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span>  <span class="cm">/**</span>
<span class="linenos"> 23</span><span class="cm">   * procedimiento encargado de administrar las respuestas de error de wp-rest-api</span>
<span class="linenos"> 24</span><span class="cm">   * @params error - Respuesta de error obtenida de la petición mediante dependecia HTTP</span>
<span class="linenos"> 25</span><span class="cm">   * @returns Mensaje de error obtenido</span>
<span class="linenos"> 26</span><span class="cm">   */</span>
<span class="linenos"> 27</span>  <span class="nx">handleError</span><span class="p">(</span><span class="nx">error</span>: <span class="kt">HttpErrorResponse</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 28</span>    <span class="kd">let</span> <span class="nx">errorMessage</span> <span class="o">=</span> <span class="s1">&#39;Hubo un problema, intente nuevamente&#39;</span><span class="p">;</span>
<span class="linenos"> 29</span>    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">error</span> <span class="ow">instanceof</span> <span class="nx">ErrorEvent</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 30</span>      <span class="c1">// Errores del lado del cliente</span>
<span class="linenos"> 31</span>      <span class="nx">errorMessage</span> <span class="o">=</span> <span class="sb">`Error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="linenos"> 32</span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="linenos"> 33</span>      <span class="c1">// Errores del lado de la api</span>
<span class="linenos"> 34</span>      <span class="nx">errorMessage</span> <span class="o">=</span> <span class="sb">`Código de error: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">status</span><span class="si">}</span><span class="sb">\n Mensaje: </span><span class="si">${</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
<span class="linenos"> 35</span>    <span class="p">}</span>
<span class="linenos"> 36</span>    <span class="k">return</span> <span class="nx">throwError</span><span class="p">(</span><span class="nx">errorMessage</span><span class="p">);</span>
<span class="linenos"> 37</span>  <span class="p">}</span>
<span class="linenos"> 38</span>
<span class="linenos"> 39</span>  <span class="cm">/**</span>
<span class="linenos"> 40</span><span class="cm">   * Método encargado de obtener el listado de los posts publicados en el blog</span>
<span class="linenos"> 41</span><span class="cm">   * @params page - Número de la página a consultar</span>
<span class="linenos"> 42</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos"> 43</span><span class="cm">   */</span>
<span class="linenos"> 44</span>  <span class="nx">getRecentPosts</span><span class="p">(</span><span class="nx">page</span> <span class="o">=</span> <span class="mf">1</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 45</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos"> 46</span>      <span class="nx">observe</span><span class="o">:</span> <span class="s1">&#39;response&#39;</span> <span class="kr">as</span> <span class="s1">&#39;body&#39;</span><span class="p">,</span>
<span class="linenos"> 47</span>      <span class="nx">params</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos"> 48</span>        <span class="nx">per_page</span><span class="o">:</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span>
<span class="linenos"> 49</span>        <span class="nx">page</span><span class="o">:</span> <span class="s1">&#39;&#39;</span> <span class="o">+</span> <span class="nx">page</span><span class="p">,</span>
<span class="linenos"> 50</span>        <span class="nx">orderby</span><span class="o">:</span> <span class="s1">&#39;modified&#39;</span><span class="p">,</span>
<span class="linenos"> 51</span>      <span class="p">},</span>
<span class="linenos"> 52</span>    <span class="p">};</span>
<span class="linenos"> 53</span>
<span class="linenos"> 54</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos"> 55</span>      <span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts?_embed=true`</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos"> 56</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos"> 57</span>        <span class="nx">map</span><span class="p">((</span><span class="nx">res</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos"> 58</span>          <span class="k">this</span><span class="p">.</span><span class="nx">pages</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">].</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;x-wp-totalpages&#39;</span><span class="p">);</span>
<span class="linenos"> 59</span>          <span class="k">this</span><span class="p">.</span><span class="nx">allPosts</span> <span class="o">=</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;headers&#39;</span><span class="p">].</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;x-wp-total&#39;</span><span class="p">);</span>
<span class="linenos"> 60</span>          <span class="k">return</span> <span class="nx">res</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">];</span>
<span class="linenos"> 61</span>        <span class="p">}),</span>
<span class="linenos"> 62</span>        <span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">)</span>
<span class="linenos"> 63</span>      <span class="p">);</span>
<span class="linenos"> 64</span>  <span class="p">}</span>
<span class="linenos"> 65</span>
<span class="linenos"> 66</span>  <span class="cm">/**</span>
<span class="linenos"> 67</span><span class="cm">   * Método encargado de obtener detalles de un post especifico</span>
<span class="linenos"> 68</span><span class="cm">   * @params id - ID del post a consultar</span>
<span class="linenos"> 69</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos"> 70</span><span class="cm">   */</span>
<span class="linenos"> 71</span>  <span class="nx">getPost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span> <span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos"> 72</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">?_embed`</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos"> 73</span>      <span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos"> 74</span>        <span class="k">return</span> <span class="nx">post</span><span class="p">;</span>
<span class="linenos"> 75</span>      <span class="p">})</span>
<span class="linenos"> 76</span>    <span class="p">);</span>
<span class="linenos"> 77</span>  <span class="p">}</span>
<span class="linenos"> 78</span>
<span class="linenos"> 79</span>  <span class="cm">/**</span>
<span class="linenos"> 80</span><span class="cm">   * Método encargado de obtener los comentarios de un post en especifico</span>
<span class="linenos"> 81</span><span class="cm">   * @params Id - Número de identificación del comentario</span>
<span class="linenos"> 82</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos"> 83</span><span class="cm">   */</span>
<span class="linenos"> 84</span>  <span class="nx">getComments</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos"> 85</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">comments?post=</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">).</span><span class="nx">pipe</span><span class="p">(</span>
<span class="linenos"> 86</span>      <span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
<span class="linenos"> 87</span>        <span class="k">return</span> <span class="nx">post</span><span class="p">;</span>
<span class="linenos"> 88</span>      <span class="p">})</span>
<span class="linenos"> 89</span>    <span class="p">);</span>
<span class="linenos"> 90</span>  <span class="p">}</span>
<span class="linenos"> 91</span>
<span class="linenos"> 92</span>  <span class="cm">/**</span>
<span class="linenos"> 93</span><span class="cm">   * Método encargado de obtener listado de categorias existentes</span>
<span class="linenos"> 94</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos"> 95</span><span class="cm">   */</span>
<span class="linenos"> 96</span>
<span class="linenos"> 97</span>  <span class="nx">getCategories</span><span class="p">()</span> <span class="p">{</span>
<span class="linenos"> 98</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">categories`</span><span class="p">);</span>
<span class="linenos"> 99</span>  <span class="p">}</span>
<span class="linenos">100</span>
<span class="linenos">101</span>
<span class="linenos">102</span>  <span class="cm">/**</span>
<span class="linenos">103</span><span class="cm">   * Método encargado de crear un nuevo post</span>
<span class="linenos">104</span><span class="cm">   * @params data - Array con la información ingresada por el usuario en el modal </span>
<span class="linenos">105</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos">106</span><span class="cm">   */</span>
<span class="linenos">107</span>  <span class="nx">createpost</span><span class="p">(</span><span class="nx">data</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos">108</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">109</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos">110</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos">111</span>      <span class="p">},</span>
<span class="linenos">112</span>    <span class="p">};</span>
<span class="linenos">113</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos">114</span>      <span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">Post</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">115</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">116</span>  <span class="p">}</span>
<span class="linenos">117</span>
<span class="linenos">118</span>  <span class="cm">/**</span>
<span class="linenos">119</span><span class="cm">   * Método encargado de cargar un archivo de imagen en wp-rest-api</span>
<span class="linenos">120</span><span class="cm">   * @returns Respuesta de petición post de la api</span>
<span class="linenos">121</span><span class="cm">   */</span>
<span class="linenos">122</span>  <span class="nx">uploadImage</span><span class="p">(</span><span class="nx">data</span>:<span class="kt">any</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">123</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">124</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos">125</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos">126</span>      <span class="p">},</span>
<span class="linenos">127</span>    <span class="p">};</span>
<span class="linenos">128</span>  
<span class="linenos">129</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos">130</span>      <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">media`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">131</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">((</span><span class="nx">err</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="k">of</span><span class="p">(</span><span class="nx">err</span><span class="p">)));</span>
<span class="linenos">132</span>  <span class="p">}</span>
<span class="linenos">133</span>
<span class="linenos">134</span>  <span class="cm">/**</span>
<span class="linenos">135</span><span class="cm">   * Método encargado de actualizar un post</span>
<span class="linenos">136</span><span class="cm">   * @params id - Número de	identificación del posts</span>
<span class="linenos">137</span><span class="cm">   * @params data - Array con los datos a modificar del post existente</span>
<span class="linenos">138</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos">139</span><span class="cm">   */</span>
<span class="linenos">140</span>
<span class="linenos">141</span>  <span class="nx">updatepost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">,</span> <span class="nx">data</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos">142</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">143</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos">144</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos">145</span>      <span class="p">},</span>
<span class="linenos">146</span>    <span class="p">};</span>
<span class="linenos">147</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos">148</span>      <span class="p">.</span><span class="nx">post</span><span class="o">&lt;</span><span class="nx">Post</span><span class="o">&gt;</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">149</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">150</span>  <span class="p">}</span>
<span class="linenos">151</span>
<span class="linenos">152</span>  <span class="cm">/**</span>
<span class="linenos">153</span><span class="cm">   * Método encargado de eliminar un post</span>
<span class="linenos">154</span><span class="cm">   * @params Id - Número de identificación del post a eliminar</span>
<span class="linenos">155</span><span class="cm">   * @returns Respuesta de petición de la api</span>
<span class="linenos">156</span><span class="cm">   */</span>
<span class="linenos">157</span>
<span class="linenos">158</span>  <span class="nx">deletepost</span><span class="p">(</span><span class="nx">id</span>: <span class="kt">any</span><span class="p">)</span><span class="o">:</span> <span class="nx">Observable</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="linenos">159</span>    <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">160</span>      <span class="nx">headers</span><span class="o">:</span> <span class="p">{</span>
<span class="linenos">161</span>        <span class="nx">Authorization</span><span class="o">:</span> <span class="s1">&#39;Bearer &#39;</span> <span class="o">+</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s1">&#39;wp-token&#39;</span><span class="p">),</span>
<span class="linenos">162</span>      <span class="p">},</span>
<span class="linenos">163</span>    <span class="p">};</span>
<span class="linenos">164</span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">http</span>
<span class="linenos">165</span>      <span class="p">.</span><span class="ow">delete</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">WP_API</span><span class="si">}</span><span class="sb">posts/</span><span class="si">${</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span>
<span class="linenos">166</span>      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">catchError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">handleError</span><span class="p">));</span>
<span class="linenos">167</span>  <span class="p">}</span>
<span class="linenos">168</span>
<span class="linenos">169</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="categoryInterface.html" class="btn btn-neutral float-left" title="Interface: WP_Category" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="authService.html" class="btn btn-neutral float-right" title="Servicio: Autenticación" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2021, Daniel Pacheco.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>