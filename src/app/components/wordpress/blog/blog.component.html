<ngx-loading-bar [fixed]="false" color="#126E82" height="4px" [includeSpinner]="false" > </ngx-loading-bar>
<mat-toolbar>
  <span class="spancentered">Blog</span>
    <span  *ngIf="checklogin()" style="font-size:0.6em; margin:8px" > <!-- Hola, {{userData.user_display_name}} --><a style="color:blue;  cursor: pointer" (click)="logout()">¿Cerrar sesión?</a></span>
    <button *ngIf="!checklogin()" [routerLink]="['/web/wp-login']" mat-stroked-button class="login-button">
      Iniciar sesión
    </button>
    <button [routerLink]="['/web/newpost']" mat-stroked-button class="add-button">
      Añadir
    </button>
</mat-toolbar>
<span *ngIf="postCount">Nro. de publicaciones: {{postCount }}</span>

<div class="container">
    <section class="card-holder">
      <mat-card class="card mat-elevation-z3" *ngFor="let post of posts">
        <mat-card-header>
        <div mat-card-avatar class="header-image" style="background-image: url('{{post._embedded.author[0].avatar_urls[96]}}');"></div>
          <mat-card-title>{{post._embedded.author[0].name}}</mat-card-title>
          <mat-card-subtitle *ngIf="post.modified">{{post.date_gmt| date}}</mat-card-subtitle>
          <button mat-icon-button class="more-button " [matMenuTriggerFor]="menu" aria-label="Toggle menu">
            <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #menu="matMenu" xPosition="before">
            <!--<button mat-menu-item (click)="openEdit(post)"  >Editar</button>-->
            <button mat-menu-item (click)='deletePost(post)'>Eliminar</button>
          </mat-menu>
        </mat-card-header>
        <svg *ngIf="!post._embedded['wp:featuredmedia']" class="placeholder" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" focusable="false"
          role="img" aria-label="Thumbnail">
          <text x="50%" y="50%"> Sin imagen</text>
        </svg>
        <img [routerLink]="['/web/','post', post.id]" mat-card-image *ngIf="post._embedded['wp:featuredmedia']"
          [src]="post._embedded['wp:featuredmedia']['0'].source_url">
        <mat-card-content [routerLink]="['/web/','post', post.id]">
          <div [innerHTML]="post.excerpt.rendered"></div>
        </mat-card-content>
    <!--     <mat-card-actions style="padding: 0%; margin-inline-start: 80%;">
          <button mat-button [routerLink]="['/web/','post', post.id]">Ver</button>
        </mat-card-actions> -->
      </mat-card>
    </section>
</div>

<div class="paginator mat-elevation-z4">
  <mat-paginator [length]="postCount" [pageSize]="4" [pageSizeOptions]="[4, 8, 10, 100]" aria-label="Select page">
  </mat-paginator>
<!--   <div class="row mb-3 mt-3">
    <div class="col-6">
      <button (click)="previous()">Atras</button>
    </div>
    <div class="col-6">
      <button (click)="next()">Siguiente</button>
    </div>
  </div> -->
</div>
